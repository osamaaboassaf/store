<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Store</title>
	<link rel="stylesheet" href="menu-style.css">
	<link rel="shortcut icon" type="image/x-icon" href="icon.png"/>
	
</head>
<body>
	<div class="side-nav">
		<div class="user">
			<img src="images/user.png" class="user-img">
			<div>
				<h2>Osama Assaf</h2>
				<p>osama@xyz.com</p>
			</div>
		</div>

		<ul class="option">
			<li>
				<a href="javascript:void(0);" onclick="changeContent('pants')">
					<img src="images/pants.png">
				</a>
				<a href="javascript:void(0);" onclick="changeContent('pants')">
					<p>Pants</p>
				</a>
			</li>

			<li>
				<a href="javascript:void(0);" onclick="changeContent('suit')">
					<img src="images/suit.png">
				</a>
				<a href="javascript:void(0);" onclick="changeContent('suit')">
					<p>Suits</p>
				</a>
			</li>

			<li>
				<a href="javascript:void(0);" onclick="changeContent('shirt')">
					<img src="images/shirt.png">
				</a>
				<a href="javascript:void(0);" onclick="changeContent('shirt')">
					<p>Shirt</p>
				</a>
			</li>

			<li>
				<a href="javascript:void(0);" onclick="changeContent('short')">
					<img src="images/short.png">
				</a>
				<a href="javascript:void(0);" onclick="changeContent('short')">
					<p>Short</p>
				</a>
			</li>

			<li>
				<a href="javascript:void(0);" onclick="changeContent('t-shirt')">
					<img src="images/t-shirt.png">
				</a>
				<a href="javascript:void(0);" onclick="changeContent('t-shirt')">
					<p>T-Shirt</p>
				</a>
			</li>

			<li>
				<a href="javascript:void(0);" onclick="changeContent('skirt')">
					<img src="images/skirt.png">
				</a>
				<a href="javascript:void(0);" onclick="changeContent('skirt')">
					<p>Skirt</p>
				</a>
			<li>
				<a href="javascript:void(0);" onclick="changeContent('dress')">
					<img src="images/skirt.png">
				</a>
				<a href="javascript:void(0);" onclick="changeContent('dress')">
					<p>Dress</p>
				</a>
			</li>

			<li>
				<a href="index.html"><img src="images/logout.png"></a>
				<a href="index.html"><p>Logout</p></a>
			</li>

		</ul>
	</div>

	<div class="page" id="page"></div>

	

	<script>
		function changeContent(contentType) {
			var page = document.getElementById("page");
			var content = "";

			var imageUrls = [];

			if (contentType === 'pants'){
		        imageUrls = ['pants/1.png', 'pants/2.png', 'pants/3.png', 'pants/4.png'];
		    }

			if(contentType==='suit'){
				imageUrls = ['suit/1.png', 'suit/2.png', 'suit/3.png', 'suit/4.png'];
				
			}

			if(contentType==='shirt'){
			}

			if(contentType==='short'){
			}

			if(contentType==='t-shirt'){
			}

			if(contentType==='skirt'){
			}

			if(contentType==='dress'){
			}
			

			for (var i = 0; i < imageUrls.length; i++) {
		        content += `
		            <div class="imgclass">
		                <img src="${imageUrls[i]}">
		                <p style="width: 100%; height:15%;"> This is a test </p>
		                <button type="button" class="imgbtn">Buy Now</button>
		            </div>
		        `;
		    }

			page.innerHTML = content;
		}
	</script>

	<script>
		changeContent('pants');
	</script>

<script>
let page = 1;
const perPage = 2;
let loading = false;
let allImagesLoaded = false;

const imageadding = document.getElementById("page");

function fetchAdditionalContent() {
    if (allImagesLoaded || loading) {
        return;
    }

    loading = true;

    setTimeout(() => {
        for (let i = 1; i <= perPage; i++) {
            const imgClass = document.createElement("div");
            imgClass.className = "imgclass";

            const imageUrl = `pants/${(page - 1) * perPage + i}.png`;

            const imgElement = new Image();
            imgElement.src = imageUrl;

            imgElement.onload = function () {
                imgClass.appendChild(imgElement);
                imgClass.innerHTML += `
                    <p style="width: 100%;height:15%;"> This is a test</p>
                    <button type="button" class="imgbtn">Buy Now</button>
                `;

                imageadding.appendChild(imgClass);
            };

            imgElement.onerror = function () {
                allImagesLoaded = true;
                loading = false;
            };
        }

        page++;
        loading = false;
    }, 1000);
}

function handleScroll() {
    const { scrollTop, clientHeight, scrollHeight } = document.documentElement;

    if (scrollTop + clientHeight >= scrollHeight - 10 && !loading) {
        fetchAdditionalContent();
    }
}


window.addEventListener("scroll", handleScroll);

// Initial load
fetchAdditionalContent();

</script>

</body>
</html>