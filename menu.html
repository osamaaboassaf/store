<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Store</title>
	<link rel="stylesheet" href="menu-style.css">
	<link rel="shortcut icon" type="image/x-icon" href="icon.png"/>
	
</head>
<body>
	<div class="side-nav">
		<div class="user">
			<img src="images/user.png" class="user-img">
			<div>
				<h2>Osama Assaf</h2>
				<p>osama@xyz.com</p>
			</div>
		</div>

		<ul class="option" id="option"></ul>
		
	</div>

	<div class="page" id="page"></div>

	<div id="loading" style="display: none; position: fixed; bottom: 0; width: 30%; background: #f0f0f0; text-align: center; padding: 10px;margin: 40%;margin-bottom: 0;background: transparent;">Loading...</div>


	<script>
    const clothingItems = [
        { name: 'Pants', image: 'images/pants.png' },
        { name: 'Suit', image: 'images/suit.png' },
        { name: 'Shirt', image: 'images/shirt.png' },
        {name: 'Short', image: 'images/short.png'},
        {name: 'T-shirt', image: 'images/t-shirt.png'},
        {name: 'Skirt', image: 'images/skirt.png'},
        {name: 'Dress', image: 'images/dress.png'},
        {name: 'logout', image: 'images/logout.png'},
    ];

    function createListItem(item) {
        const listItem = document.createElement('li');

        const link1 = document.createElement('a');
        link1.href = "javascript:void(0);";
        link1.onclick = function() { changeContent(item.name.toLowerCase()); };

        const img = document.createElement('img');
        img.src = item.image;

        link1.appendChild(img);
        listItem.appendChild(link1);

        const link2 = document.createElement('a');
        link2.href = "javascript:void(0);";
        link2.onclick = function() { changeContent(item.name.toLowerCase()); };

        const p = document.createElement('p');
        p.textContent = item.name;

        link2.appendChild(p);
        listItem.appendChild(link2);


        if (item.name.toLowerCase() == "logout") {
        	link1.href = "index.html";
        	link2.href = "index.html";
        	p.textContent = 'Logout';
        }
        return listItem;
    }

    const optionList = document.getElementById('option');

    clothingItems.forEach(item => {
        const listItem = createListItem(item);
        optionList.appendChild(listItem);
    });
</script>

	<script>
		function changeContent(contentType) {
			var page = document.getElementById("page");
			var content = "";		
			var imageUrls = [];

			if (contentType === 'pants'){
				img_text = "pants"
		        imageUrls = ['pants/1.png', 'pants/2.png', 'pants/3.png', 'pants/4.png'];
		    }

			if(contentType==='suit'){
				img_text = "suit"
				imageUrls = ['suit/1.png', 'suit/2.png', 'suit/3.png', 'suit/10.png'];	
			}

			if(contentType==='shirt'){
			}

			if(contentType==='short'){
			}

			if(contentType==='t-shirt'){
			}

			if(contentType==='skirt'){
			}

			if(contentType==='dress'){
			}

			for (var i = 0; i < imageUrls.length; i++) {
		        content += `
		            <div class="imgclass">
		                <img src="${imageUrls[i]}">
		                <p style="width: 100%; height:15%;">this is a  ${img_text}</p>
		                <button type="button" class="imgbtn">Buy Now</button>
		            </div>
		        `;
		    }

			page.innerHTML = content;

		}
	</script>

	<script>
		changeContent('pants');
	</script>	

<script>
let page = 1;
const perPage = 3;
let loading = false;
let allImagesLoaded = false;
let currentContentType = 'pants';

const imageadding = document.getElementById("page");


function fetchAdditionalContent() {
    if (allImagesLoaded || loading) {
        return;
    }
    loading = true;
	document.getElementById("loading").style.display = "block";

    setTimeout(() => {
        for (let i = 1; i <= perPage; i++) {
            const imgClass = document.createElement("div");
            imgClass.className = "imgclass";

            const imageUrl = `${currentContentType}/${(page - 1) * perPage + i}.png`;

            const imgElement = new Image();
            imgElement.src = imageUrl;

            imgElement.onload = function () {
                imgClass.appendChild(imgElement);
                imgClass.innerHTML += `
                    <p style="width: 100%;height:15%;"> this is a  ${img_text}</p>
                    <button type="button" class="imgbtn">Buy Now</button>
                `;

                imageadding.appendChild(imgClass);
            };

            imgElement.onerror = function () {
                allImagesLoaded = true;
                loading = false;
            };
            document.getElementById("loading").style.display = "none";
        }

        page++;
        loading = false;
    }, 1000);
}

function handleScroll() {
    const { scrollTop, clientHeight, scrollHeight } = document.documentElement;

    if (scrollTop + clientHeight >= scrollHeight - 10 && !loading) {
        fetchAdditionalContent();
    }
}


window.addEventListener("scroll", handleScroll);

// Initial load
fetchAdditionalContent();

</script>

</body>
</html>